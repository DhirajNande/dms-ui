<!-- <p>orders-receive-shipment works!</p> -->
<div class="main">
    <div class="container promotionpopup-scroll" style="max-width: 1346px;">
        <div class="addUser">
            <img class="print-img" src="../../../assets/material/print-img.svg" alt="">
            <mat-icon mat-button class="close-icon" [mat-dialog-close]="true">close</mat-icon>

        </div>
        <div class="head-t">
            <h3 class="addU font">Receive Shipment</h3>
            <div class="row top-bottom">
                <div class="row text-center"></div>
            </div>
            <div (click)="expandDealerInfoDiv()" class="collapsible">
                <div class="row">
                    <div class="col-md-11">
                        <p class="label-cls">Dealer Information</p>
                    </div>
                    <div class="col-md-1">
                        <img [src]="image1" class="expand-arrow" alt="add-user-btn">
                    </div>
                </div>
            </div>
            <div class="content" *ngIf="!dealerInfo">
                <div class="row">
                    <div class="col-lg-3">
                        <div class="dealerr">
                            <label class="DealerInfo-label">Dealer <span class="astr"></span></label>
                            <br>
                            <label class="DescInfo-label">{{shipmentArray.customername}}</label>
                        </div>
                    </div>
                    <div class="col-lg-3">
                        <div class="geographyy">
                            <label class="DealerInfo-label">Geography <span class="astr"></span></label>
                            <br>
                            <label class="DescInfo-label">{{shipmentArray.geographyName}}</label>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="billingAdrs">
                            <label class="DealerInfo-label">Billing Address <span class="astr"></span></label>
                            <label class="DescInfo-label">{{shipmentArray.billngAddress}}</label>
                        </div>
                    </div>
                </div>

                <div class="row">
                    <div class="col-lg-3">
                        <div class="dealerReff">
                            <label class="DealerInfo-label">Dealer Reference No <span class="astr"></span></label>
                            <br>
                            <label class="DescInfo-label">{{shipmentArray.dealerrefno}}</label>
                        </div>
                    </div>
                    <div class="col-lg-3">
                        <div class="companyReff">
                            <label class="DealerInfo-label">Company Reference No <span class="astr"></span></label>
                            <br>
                            <label class="DescInfo-label">{{shipmentArray.comrefno}}</label>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="shippingAdrs">
                            <label class="DealerInfo-label">Shipping Address <span class="astr"></span></label>
                            <label class="DescInfo-label">{{shipmentArray.shippingAddress}}</label>
                        </div>
                    </div>
                </div>
            </div>
            <div class="top-bottom  {
                height: 500px !important;
              }">
                <div class="collapsible" (click)="expandOrderItemsDiv()">
                    <div class="row">
                        <div class="col-lg-11">
                            <p class="label-cls">Items</p>
                        </div>
                        <div class="col-lg-1">
                            <img [src]="image2" class="expand-arrow" alt="add-user-btn">
                        </div>
                    </div>
                </div>
                <div class="content " *ngIf="!orderitem">
                    <div class="section mt-1">
                        <table>
                            <tr>
                                <th>Item</th>
                                <th>UoM</th>
                                <th>Order Qty</th>
                                <th>Stock</th>
                                <th>Unit Price</th>
                                <th>Discount</th>
                                <th>Final Value</th>
                                <th>Tax</th>
                                <th>Amount</th>
                            </tr>
                            <tr [(ngModel)]="itemremoved" *ngFor="let data of itemsArray ">
                                <td>
                                    <p class="itemLeft"><span
                                            class="promoItem">{{data.promo}}</span>{{data.stockitemname?data.stockitemname:''}}
                                    </p>
                                </td>
                                <td>
                                    <label class="IteminputBoxes">{{data.uomname}}</label>
                                </td>
                                <td>
                                    <label class="IteminputBoxes">{{data.quantity}}</label>
                                </td>
                                <td>
                                    <label class="IteminputBoxes">{{data.stock}}</label>
                                </td>
                                <td>
                                    <label class="IteminputBoxes">{{data.price}}</label>
                                </td>
                                <td>
                                    <label class="IteminputBoxes">{{data.discount}}</label>
                                </td>
                                <td>
                                    <label class="IteminputBoxes">{{data.finalValue}}</label>
                                </td>
                                <td>
                                    <label class="IteminputBoxes">{{data.taxvalue}}</label>
                                </td>
                                <td>
                                    <label class="IteminputBoxes">{{data.amount}}</label>
                                </td>
                                <!-- <mat-icon class="removeCircle" (click)=removeItem()>
                                remove_circle</mat-icon> -->
                            </tr>


                        </table>
                    </div>
                    <div class="row mt-2">
                        <div class="totall">
                            <div class="innerTotal d-flex">
                                <div class="subitem">
                                    <p class="alltotals">Sub Total</p>
                                    <span>{{shipmentArray.subTotal}}</span>
                                </div>
                                <div class="subitem">
                                    <p class="alltotals">Tax Element</p>
                                    <span>{{shipmentArray.taxElement}}</span>
                                </div>
                                <div class="subitem">
                                    <p class="alltotals">Packing Charge</p>
                                    <span>{{shipmentArray.pakingCharge}}</span>
                                </div>
                                <div class="subitem">
                                    <p class="alltotals">Shipping Charge</p>
                                    <span>{{shipmentArray.shipingcharge}}</span>
                                </div>
                                <div class="subitem">
                                    <p class="alltotals">Total</p>
                                    <span>{{shipmentArray.total}}</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="top-bottom" *ngFor="let data of shipmentArray.previousshipDetails;let i =index">
                <div class="collapsible" (click)="expandShipmentOneDiv()">
                    <div class="row">
                        <div class="col-lg-5">
                            <p class="label-cls">{{data.shipName}}</p>
                        </div>
                        <div class="col-lg-6">
                            <p class="label-cls">Invoice no: {{data.invoiceno}}</p>
                        </div>
                        <div class="col-lg-1">
                            <img [src]="image3" class="expand-arrow" alt="add-user-btn">
                        </div>
                    </div>
                </div>

                <div class="content " *ngIf="!shipmentone">
                    <div class="section mt-1">
                        <table>
                            <tr>
                                <th>Item</th>
                                <th>UoM</th>
                                <th>Order Qty</th>
                                <th>Stock</th>
                                <th>Unit Price</th>
                                <th>Discount</th>
                                <th>Final Value</th>
                                <th>Tax</th>
                                <th>Amount</th>
                                <th>Shipped Qty</th>
                                <th>Received Qty</th>
                                <th>Lost/ Damaged</th>

                            </tr>
                            <tr [(ngModel)]="itemremoved" *ngFor="let data1 of data?.promodetails;let j =index">
                                <td>
                                    <p class="itemLeft"><span
                                            class="promoItem">{{data?.promodetails[0]?.promocode}}</span>{{data1.stockitemname}}
                                    </p>
                                </td><td><label
                                        class="IteminputBoxes">{{data1?.itemDetailsship[0].uomname}}</label>
                                    </td><td>
                                    <label
                                        class="IteminputBoxes">{{data1?.itemDetailsship[0].quantity}}</label>
                                    </td><td>
                                    <label
                                        class="IteminputBoxes">{{data1?.itemDetailsship[0].stock}}</label>
                                    </td><td>
                                    <label
                                        class="IteminputBoxes">{{data1?.itemDetailsship[0].price}}</label>
                                   </td><td>
                                   <label
                                        class="IteminputBoxes">{{data1?.itemDetailsship[0].discount}}</label></td><td>
                                    <label
                                        class="IteminputBoxes">{{data1?.itemDetailsship[0].finalValue}}</label>
                                    </td><td>
                                    <label
                                        class="IteminputBoxes">{{data1?.itemDetailsship[0].taxvalue}}</label>
                                    </td><td>
                                    <label
                                        class="IteminputBoxes">{{data1?.itemDetailsship[0].amount}}</label>
                                    </td><td>
                                   <label
                                        class="IteminputBoxes">{{data1?.itemDetailsship[0].shipedTill}}</label>
                                     </td>
                                     <td>
                                     <label
                                        class="IteminputBoxes">{{data1?.itemDetailsship[0].shipingNow}}</label>
                                     </td>
                                     <td>
                                        <label
                                           class="IteminputBoxes">{{data1?.itemDetailsship[0].shipingNow}}</label>
                                        </td>
                                </tr>


                        </table>
                    </div>
                    <div class="row mt-2">
                        <div class="totall">
                            <div class="innerTotal d-flex">
                                <div class="subitem">
                                    <p class="alltotals">Sub Total</p>
                                    <span>{{data.subTotal}}</span>
                                </div>


                                <div class="subitem">
                                    <p class="alltotals">Tax Element</p>
                                    <span>{{data.taxElement}}</span>
                                </div>
                                <div class="subitem">
                                    <p class="alltotals">Packing Charge</p>
                                    <span>{{data.pakingCharge}}</span>
                                </div>
                                <div class="subitem">
                                    <p class="alltotals">Shipping Charge</p>
                                    <span>{{shipmentArray.shipingcharge}}</span>
                                </div>
                                <div class="subitem">
                                    <p class="alltotals">Total</p>
                                    <span>{{shipmentArray.total}}</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="top-bottom"  *ngFor="let data of currentShipArray;let i =index"  >
                <div class="collapsible" (click)="expandShipmentTwoDiv()">
                    <div class="row">
                        <div class="col-lg-5">
                            <p class="label-cls">{{data.shipName}}</p>
                        </div>
                        <div class="col-lg-6">
                            <p class="label-cls">Invoice no:{{data.invoiceno}}</p>
                        </div>
                        <div class="col-lg-1">
                            <img [src]="image4" class="expand-arrow" alt="add-user-btn">
                        </div>
                    </div>
                </div>
                <div class="content-shp-3" *ngIf="!shipmenttwo">
                    <br>
                    <div class="row">
                        <div class="col-lg-3">
                            <label>Invoice No.<span class="astr">*</span></label>
                            <div class="input-datepicker mr-3">
                                <input type="text"  [(ngModel)]="data.invoiceno" class="invoice" />
                            </div>
                            <!-- <app-customdatepicker [showInputField]="true" class="input-datepicker" label="Enter" [selectedDate]="selectedDateRange" (customDatePickerEvent)="customDatePickerEvent($event)"><span class="astr">*</span></app-customdatepicker> -->
                            <!-- <input matInput placeholder="Enter" #input class="form-control container input-box" > -->
                        </div>
                        <div class="col-lg-3">
                            <!-- <div class="myDatepicker promotion-datepicker">
                                <mat-form-field class="placeh-align">
                                    <mat-label> Invoice date</mat-label>
                                    <input matInput [matDatepicker]="picker1" [formControl]="data.invoiceDate"
                                        (dateChange)="invoicedateChange($event)">
                                    <mat-datepicker-toggle matSuffix [for]="picker1">
                                        <mat-icon matDatepickerToggleIcon style="margin-left: 0px;">
                                            <img src="assets/img/calender2.png" class="calendarToggle">
                                        </mat-icon>
                                    </mat-datepicker-toggle>
                                    <mat-datepicker #picker1></mat-datepicker>
                                </mat-form-field>
                            </div> -->
                            <label>Invoice Date <span class="astr">*</span></label><br>
                            <div class="input-datepicker mr-3">
                                <input type="text"  [(ngModel)]="data.invoiceDate" class="invoice" />
                            </div>
                        </div>
                        <div class="col-lg-3">
                         
                            <label>Shipping Date<span class="astr">*</span></label><br>
                            <div class="input-datepicker mr-3">
                                <input type="text"  [(ngModel)]="data.invoiceDate" class="invoice" />
                            </div>
                            <!-- <input matInput placeholder="Select" #input class="form-control container input-box" > -->
                        </div>
                        <div class="col-lg-3">
                            <div class="myDatepicker promotion-datepicker" *ngIf="data.currentReceiveshipment">
                                <label>Receive Date<span class="astr">*</span></label><br>
                                <mat-form-field class="placeh-align">
                                    <mat-label> Receive date</mat-label>
                                    <input matInput [matDatepicker]="picker3" [formControl]="recivedate"
                                    [min]="minDate"  (dateChange)="ReciveDateChange($event)">
                                    <mat-datepicker-toggle matSuffix [for]="picker3">
                                        <mat-icon matDatepickerToggleIcon style="margin-left: 0px;">
                                            <img src="assets/img/calender2.png" class="calendarToggle">
                                        </mat-icon>
                                    </mat-datepicker-toggle>
                                    <mat-datepicker #picker3></mat-datepicker>
                                </mat-form-field>
                            </div>

                            <label *ngIf="data.currentReceiveshipment==false">Receive date<span class="astr">*</span></label><br>
                            <div class="input-datepicker mr-3" *ngIf="data.currentReceiveshipment==false">
                                <input type="text"  [(ngModel)]="data.shipmentDate" class="invoice" />
                            </div>

                        </div>
                    </div>
                    <div class="section mt-1">
                        <table>
                            <tr>
                                <th>Item</th>
                                <th>UoM</th>
                                <th>Order Qty</th>
                                <th>Stock</th>
                                <th>Unit Price</th>
                                <th>Discount</th>
                                <th>Final Value</th>
                                <th>Tax</th>
                                <th>Amount</th>
                                <th>Shipped Qty</th>
                                <th>Received Qty</th>
                                <th>Lost/ Damaged</th>
                            </tr>
                            <tr [(ngModel)]="itemremoved" *ngFor="let items of data.arrayIside;let j=index">
                                <td>
                                    <p class="itemLeft"><span
                                            class="promoItem">{{items.promocode}}</span>{{items.stockitemname}}</p>
                                </td>
                                <td>
                                    <label class="IteminputBoxes">{{items.uomname}}</label>
                                </td>
                                <td>
                                    <label class="IteminputBoxes">{{items.quantity}}</label>
                                </td>
                                <td>
                                    <label class="IteminputBoxes">{{items.stock}}</label>
                                </td>
                                <td>
                                    <label class="IteminputBoxes">{{items.price}}</label>
                                </td>
                                <td>
                                    <label class="IteminputBoxes">{{items.discount}}</label>
                                </td>
                                <td>
                                    <label class="IteminputBoxes">{{items.finalValue}}</label>
                                </td>
                                <td>
                                    <label class="IteminputBoxes">{{items.taxvalue}}</label>
                                </td>
                                <td>
                                    <label class="IteminputBoxes">{{items.amount}}</label>
                                </td>
                                <td>
                                    <input type="number" [(ngModel)]="currentShipArray[i].arrayIside[j].shipedQty"
                                        class="ShipmentinputBoxes" disabled>
                                </td>
                                <td>
                                    <input type="number" [(ngModel)]="currentShipArray[i].arrayIside[j].ReceivedQty"
                                        placeholder="Enter Quantity" 
                                    [disabled]="data.currentReceiveshipment==false"  [ngClass]="data.currentReceiveshipment==false?'ShipmentinputBoxes':'ShipmentinputBoxes1'"  (keyup)="shipingNow()">
                                </td>
                                <td>
                                    <input type="number" [(ngModel)]="currentShipArray[i].arrayIside[j].LostDamaged"
                                    [ngClass]="data.currentReceiveshipment==false?'ShipmentinputBoxes':'ShipmentinputBoxes1'" [disabled]="data.currentReceiveshipment==false">
                                </td>
                                <!-- <mat-icon class="removeCircle" (click)=removeItem()>
                            remove_circle</mat-icon> -->
                            </tr>

                        </table>
                    </div>
                    <div class="row mt-2">
                        <div class="totall">
                            <div class="innerTotal d-flex">
                                <div class="subitem">
                                    <p class="alltotals">Sub Total</p>
                                    <span>{{data.subTotal}}</span>
                                </div>


                                <div class="subitem">
                                    <p class="alltotals">Tax Element</p>
                                    <span>{{data.taxElement}}</span>
                                </div>
                                <div class="subitem">
                                    <p class="alltotals">Packing Charge</p>
                                    <span>{{data.pakingCharge}}</span>
                                </div>
                                <div class="subitem">
                                    <p class="alltotals">Shipping Charge</p>
                                    <span>{{shipmentArray.shipingcharge}}</span>
                                </div>
                                <div class="subitem">
                                    <p class="alltotals">Total</p>
                                    <span>{{shipmentArray.total}}</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    <br>
                    <div class="row">
                        <!-- <div class="col-lg-1"></div> -->
                        <div class="col-lg-11">
                            <div>
                                <label>Dispatch Comment</label>
                                <br>
                              <p>{{data.invoiceComments}}</p>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <!-- <div class="col-lg-1"></div> -->
                        <div class="col-lg-11" *ngIf="data.currentReceiveshipment">
                            <div>
                                <label>Receipt Comment</label>
                                <br>
                                <input type="text" placeholder="Enter any comments" class="dispatchComments"
                                    [(ngModel)]="ReceiptComments">
                            </div>
                        </div>
                    </div>
                    <div class="row ship end" *ngIf="data.currentReceiveshipment">
                        <div class="col-md-5">
                            <button type="button" class="saveas-draft" (click)="saveShipment('save')">Save</button>
                        </div>

                        <div class="col-md-5">
                            <!-- <button type="button"  class="cancel">Cancel</button> -->
                        </div>
                    </div>
                </div>
            </div>
            <!-- <div class="top-bottom">
                <div class="collapsible" (click)="expandOrderHistoryDiv()">
                    <div class="row">
                        <div class="col-lg-11">
                            <p class="label-cls">Order History</p>
                        </div>
                        <div class="col-lg-1">
                            <img [src]="image5" class="expand-arrow" alt="add-user-btn">
                        </div>
                    </div>
                </div>
                <br>
                <div class="content-order" *ngIf="!orderhistory">
                    <div>
                        <ag-grid-angular id="gridContainer" class="ag-theme-material mt-2"
                            (gridReady)="onGridReady($event)" [rowHeight]="25" [headerHeight]="48"
                            [columnDefs]="columnDefs" [defaultColDef]="defaultColDef" [columnTypes]="columnTypes"
                            [rowData]="rowData5" [suppressExcelExport]="true" [popupParent]="popupParent"
                            (cellValueChanged)="onCellValueChanged($event)"
                            (firstDataRendered)="onFirstDataRendered($event)"
                            (firstDataRendered)="onFirstDataRendered($event)" (rowClicked)="openDialog()"
                            (cellClicked)="onCellClicked($event)" [paginationPageSize]="paginationPageSize"
                            (bodyScroll)="handleScroll($event)" [rowSelection]="'multiple'"
                            (rowSelected)="onRowSelect($event)"></ag-grid-angular>
                    </div>

                </div>

            </div> -->

        </div>

    </div>

</div>
<div class="row">
    <div class="col-lg-5"></div>
    <div class="col-lg-4">
        <button type="button" class="cancelButton" [mat-dialog-close]="true">Cancel</button>
    </div>
    <div class="col-lg-3"></div>
</div>